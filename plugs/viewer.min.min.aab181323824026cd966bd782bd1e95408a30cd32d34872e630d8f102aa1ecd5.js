/*!
 * Viewer.js v1.11.6
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:16:38.052Z
 */!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Viewer=t()}(this,function(){"use strict";function se(e,t){var n,s=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)),s}function Q(e){for(var t,n=1;n<arguments.length;n++)t=null!=arguments[n]?arguments[n]:{},n%2?se(Object(t),!0).forEach(function(n){var s=e,o=t[n=n];(n=be(n))in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n,s=0;s<t.length;s++)n=t[s],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,be(n.key),n)}function be(e){return e=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=typeof(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"==typeof e?e:String(e)}var ge,ee,d,ie,ue,B,U,K,X,je={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},g="undefined"!=typeof window&&void 0!==window.document,u=g?window:{},k=!!g&&!!u.document.documentElement&&"ontouchstart"in u.document.documentElement,v=g&&"PointerEvent"in u,n="viewer",R="move",ye="switch",M="zoom",H="".concat(n,"-active"),_e="".concat(n,"-close"),L="".concat(n,"-fade"),$="".concat(n,"-fixed"),we="".concat(n,"-fullscreen"),ve="".concat(n,"-fullscreen-exit"),j="".concat(n,"-hide"),Oe="".concat(n,"-hide-md-down"),xe="".concat(n,"-hide-sm-down"),Ce="".concat(n,"-hide-xs-down"),m="".concat(n,"-in"),F="".concat(n,"-invisible"),E="".concat(n,"-loading"),Ee="".concat(n,"-move"),he="".concat(n,"-open"),A="".concat(n,"-show"),c="".concat(n,"-transition"),C="click",Y="dblclick",de="dragstart",le="focusin",ce="keydown",h="load",b="error",re=v?"pointerdown":k?"touchstart":"mousedown",ae=v?"pointermove":k?"touchmove":"mousemove",oe=v?"pointerup pointercancel":k?"touchend touchcancel":"mouseup",Z="resize",p="transitionend",ne="wheel",S="viewed",te="rotated",V="".concat(n,"Action"),q=/\s\s*/,P=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function T(e){return"string"==typeof e}ge=Number.isNaN||u.isNaN;function r(e){return"number"==typeof e&&!ge(e)}function _(e){return void 0===e}function w(e){return"object"===fe(e)&&null!==e}ee=Object.prototype.hasOwnProperty;function x(e){if(!w(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&ee.call(n,"isPrototypeOf")}catch{return!1}}function i(e){return"function"==typeof e}function a(e,t){if(e&&i(t))if(Array.isArray(e)||r(e.length))for(var s=e.length,n=0;n<s&&!1!==t.call(e,e[n],n,e);n+=1);else w(e)&&Object.keys(e).forEach(function(n){t.call(e,e[n],n,e)})}d=Object.assign||function(e){for(var n=arguments.length,s=new Array(1<n?n-1:0),t=1;t<n;t++)s[t-1]=arguments[t];return w(e)&&0<s.length&&s.forEach(function(t){w(t)&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e},ie=/^(?:width|height|left|top|marginLeft|marginTop)$/;function f(e,t){var n=e.style;a(t,function(e,t){ie.test(t)&&r(e)&&(e+="px"),n[t]=e})}function O(e,t){return e&&t&&(e.classList?e.classList.contains(t):-1<e.className.indexOf(t))}function e(t,n){var s;t&&n&&(r(t.length)?a(t,function(t){e(t,n)}):t.classList?t.classList.add(n):(s=t.className.trim())?s.indexOf(n)<0&&(t.className="".concat(s," ").concat(n)):t.className=n)}function s(e,t){e&&t&&(r(e.length)?a(e,function(e){s(e,t)}):e.classList?e.classList.remove(t):0<=e.className.indexOf(t)&&(e.className=e.className.replace(t,"")))}function z(t,n,o){n&&(r(t.length)?a(t,function(e){z(e,n,o)}):(o?e:s)(t,n))}ue=/([a-z\d])([A-Z])/g;function W(e){return e.replace(ue,"$1-$2").toLowerCase()}function y(e,t){return w(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(W(t)))}function G(e,t,n){w(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(W(t)),n)}K=!1,g&&(X=!1,v=function(){},g=Object.defineProperty({},"once",{get:function(){return K=!0,X},set:function(e){X=e}}),u.addEventListener("test",v,g),u.removeEventListener("test",v,g)),U=K;function o(e,t,n,s){var i=3<arguments.length&&void 0!==s?s:{},o=n;t.trim().split(q).forEach(function(t){var s;U||(s=e.listeners)&&s[t]&&s[t][n]&&(o=s[t][n],delete s[t][n],0===Object.keys(s[t]).length&&delete s[t],0===Object.keys(s).length)&&delete e.listeners,e.removeEventListener(t,o,i)})}function t(e,t,n,s){var o=3<arguments.length&&void 0!==s?s:{},i=n;t.trim().split(q).forEach(function(t){var s,a;o.once&&!U&&(a=e.listeners,i=function(){delete s[t][n],e.removeEventListener(t,i,o);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];n.apply(e,c)},(s=void 0===a?{}:a)[t]||(s[t]={}),s[t][n]&&e.removeEventListener(t,s[t][n],o),s[t][n]=i,e.listeners=s),e.addEventListener(t,i,o)})}function l(e,t,n,s){var o;return i(Event)&&i(CustomEvent)?o=new CustomEvent(t,Q({bubbles:!0,cancelable:!0,detail:n},s)):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function I(e){var s=e.rotate,o=e.scaleX,i=e.scaleY,t=e.translateX,e=e.translateY,n=[],t=(r(t)&&0!==t&&n.push("translateX(".concat(t,"px)")),r(e)&&0!==e&&n.push("translateY(".concat(e,"px)")),r(s)&&0!==s&&n.push("rotate(".concat(s,"deg)")),r(o)&&1!==o&&n.push("scaleX(".concat(o,")")),r(i)&&1!==i&&n.push("scaleY(".concat(i,")")),n.length?n.join(" "):"none");return{WebkitTransform:t,msTransform:t,transform:t}}B=u.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(u.navigator.userAgent);function J(e,t,n){var o,s=document.createElement("img");return e.naturalWidth&&!B?n(e.naturalWidth,e.naturalHeight):(o=document.body||document.documentElement,s.onload=function(){n(s.width,s.height),B||o.removeChild(s)},a(t.inheritedAttributes,function(t){var n=e.getAttribute(t);null!==n&&s.setAttribute(t,n)}),s.src=e.src,B||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(s))),s}function D(e){switch(e){case 2:return Ce;case 3:return xe;case 4:return Oe;default:return""}}function N(e,t){var n=e.pageX,e=e.pageY,s={endX:n,endY:e};return t?s:Q({timeStamp:Date.now(),startX:n,startY:e},s)}var me,v={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,t=e.body||e.documentElement;this.body=t,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=t.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(t).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e,t=this.options,n=this.parent;t.inline&&(e={width:Math.max(n.offsetWidth,t.minWidth),height:Math.max(n.offsetHeight,t.minHeight)},this.parentData=e),!this.fulled&&e||(e=this.containerData),this.viewerData=d({},e)},renderViewer:function(){this.options.inline&&!this.fulled&&f(this.viewer,this.viewerData)},initList:function(){var r=this,d=this.element,n=this.options,i=this.list,l=[];i.innerHTML="",a(this.images,function(e,t){var s,o,c=e.src,d=e.alt||(T(d=c)?decodeURIComponent(d.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""),u=r.getImageURL(e);(c||u)&&(s=document.createElement("li"),o=document.createElement("img"),a(n.inheritedAttributes,function(t){var n=e.getAttribute(t);null!==n&&o.setAttribute(t,n)}),n.navbar&&(o.src=c||u),o.alt=d,o.setAttribute("data-original-url",u||c),s.setAttribute("data-index",t),s.setAttribute("data-viewer-action","view"),s.setAttribute("role","button"),n.keyboard&&s.setAttribute("tabindex",0),s.appendChild(o),i.appendChild(s),l.push(s))}),a(this.items=l,function(i){var c,l,a=i.firstElementChild;G(a,"filled",!0),n.loading&&e(i,E),t(a,h,c=function(e){o(a,b,l),n.loading&&s(i,E),r.loadImage(e)},{once:!0}),t(a,b,l=function(){o(a,h,c),n.loading&&s(i,E)},{once:!0})}),n.transition&&t(d,S,function(){e(i,c)},{once:!0})},renderList:function(){var t,n,s=this.index,e=this.items[s];e&&(t=e.nextElementSibling,t=parseInt(window.getComputedStyle(t||e).marginLeft,10),e=e.offsetWidth,f(this.list,d({width:(n=e+t)*this.length-t},I({translateX:(this.viewerData.width-e)/2-n*s}))))},resetList:function(){var e=this.list;e.innerHTML="",s(e,c),f(e,I({translateX:0}))},initImage:function(e){var a,o=this,t=this.options,u=this.image,c=this.viewerData,l=this.footer.offsetHeight,n=c.width,s=Math.max(c.height-l,l),i=this.imageData||{};this.imageInitializing={abort:function(){a.onload=null}},a=J(u,t,function(a,c){var f=a/c,l=Math.max(0,Math.min(1,t.initialCoverage)),h=n,m=s,l=(o.imageInitializing=!1,n<s*f?m=n/f:h=s*f,l=r(l)?l:.9,h=Math.min(h*l,a),m=Math.min(m*l,c),(n-h)/2),u=(s-m)/2,l={left:l,top:u,x:l,y:u,width:h,height:m,oldRatio:1,ratio:h/a,aspectRatio:f,naturalWidth:a,naturalHeight:c},u=d({},l);t.rotatable&&(l.rotate=i.rotate||0,u.rotate=0),t.scalable&&(l.scaleX=i.scaleX||1,l.scaleY=i.scaleY||1,u.scaleX=1,u.scaleY=1),o.imageData=l,o.initialImageData=u,e&&e()})},renderImage:function(e){var i,a=this,s=this.image,n=this.imageData;f(s,d({width:n.width,height:n.height,marginLeft:n.x,marginTop:n.y},I(n))),e&&((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&O(s,c)?(i=function(){a.imageRendering=!1,e()},this.imageRendering={abort:function(){o(s,p,i)}},t(s,p,i,{once:!0})):e())},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},g={bind:function(){var e=this.options,n=this.viewer,o=this.canvas,s=this.element.ownerDocument;t(n,C,this.onClick=this.click.bind(this)),t(n,de,this.onDragStart=this.dragstart.bind(this)),t(o,re,this.onPointerDown=this.pointerdown.bind(this)),t(s,ae,this.onPointerMove=this.pointermove.bind(this)),t(s,oe,this.onPointerUp=this.pointerup.bind(this)),t(s,ce,this.onKeyDown=this.keydown.bind(this)),t(window,Z,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&t(n,ne,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&t(o,Y,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,t=this.viewer,s=this.canvas,n=this.element.ownerDocument;o(t,C,this.onClick),o(t,de,this.onDragStart),o(s,re,this.onPointerDown),o(n,ae,this.onPointerMove),o(n,oe,this.onPointerUp),o(n,ce,this.onKeyDown),o(window,Z,this.onResize),e.zoomable&&e.zoomOnWheel&&o(t,ne,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&o(s,Y,this.onDblclick)}},ke={click:function(e){var n=this.options,o=this.imageData,t=e.target,s=y(t,V);switch(s||"img"!==t.localName||"li"!==t.parentElement.localName||(s=y(t=t.parentElement,V)),k&&e.isTrusted&&t===this.canvas&&clearTimeout(this.clickCanvasTimeout),s){case"mix":this.played?this.stop():n.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(y(t,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(n.loop);break;case"play":this.play(n.fullscreen);break;case"next":this.next(n.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-o.scaleX||-1);break;case"flip-vertical":this.scaleY(-o.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(k&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var o=this,a=(this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),this.element),e=this.options,n=this.image,r=this.index,d=this.viewerData;s(n,F),e.loading&&s(this.canvas,E),n.style.cssText="height:0;"+"margin-left:".concat(d.width/2,"px;")+"margin-top:".concat(d.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){z(n,Ee,e.movable),z(n,c,e.transition),o.renderImage(function(){o.viewed=!0,o.viewing=!1,i(e.viewed)&&t(a,S,e.viewed,{once:!0}),l(a,S,{originalImage:o.images[r],index:r,image:n},{cancelable:!1})})})},loadImage:function(e){var s=e.target,e=s.parentNode,t=e.offsetWidth||30,n=e.offsetHeight||50,o=!!y(s,"filled");J(s,this.options,function(e,i){var e=e/i,i=t,a=n;t<n*e?o?i=n*e:a=t/e:o?a=t/e:i=n*e,f(s,d({width:i,height:a},I({translateX:(t-i)/2,translateY:(n-a)/2})))})},keydown:function(e){var n,t=this.options;if(t.keyboard&&(n=e.keyCode||e.which||e.charCode,13===n&&this.viewer.contains(e.target)&&this.click(e),this.fulled))switch(n){case 27:this.played?this.stop():t.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(t.loop);break;case 38:e.preventDefault(),this.zoom(t.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(t.loop);break;case 40:e.preventDefault(),this.zoom(-t.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle())}},dragstart:function(e){"img"===e.target.localName&&e.preventDefault()},pointerdown:function(e){var n=this.options,o=this.pointers,t=e.buttons,i=e.button;this.pointerMoved=!1,!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(r(t)&&1!==t||r(i)&&0!==i||e.ctrlKey)||(e.preventDefault(),e.changedTouches?a(e.changedTouches,function(e){o[e.identifier]=N(e)}):o[e.pointerId||0]=N(e),t=!!n.movable&&R,n.zoomOnTouch&&n.zoomable&&1<Object.keys(o).length?t=M:n.slideOnTouch&&("touch"===e.pointerType||"touchstart"===e.type)&&this.isSwitchable()&&(t=ye),!n.transition||t!==R&&t!==M||s(this.image,c),this.action=t)},pointermove:function(e){var t=this.pointers,n=this.action;this.viewed&&n&&(e.preventDefault(),e.changedTouches?a(e.changedTouches,function(e){d(t[e.identifier]||{},N(e,!0))}):d(t[e.pointerId||0]||{},N(e,!0)),this.change(e))},pointerup:function(t){var n,r=this,s=this.options,o=this.action,i=this.pointers;t.changedTouches?a(t.changedTouches,function(e){n=i[e.identifier],delete i[e.identifier]}):(n=i[t.pointerId||0],delete i[t.pointerId||0]),o&&(t.preventDefault(),!s.transition||o!==R&&o!==M||e(this.image,c),this.action=!1,k)&&o!==M&&n&&Date.now()-n.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),s.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){l(r.image,Y,{originalEvent:t})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){r.imageClicked=!1},500)):(this.imageClicked=!1,s.backdrop&&"static"!==s.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){l(r.canvas,C,{originalEvent:t})},50))))},resize:function(){var e=this;this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)&&(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?this.stop():a(this.player.getElementsByTagName("img"),function(n){t(n,h,e.loadImage.bind(e),{once:!0}),l(n,h)}))},wheel:function(e){var t,n,s=this;this.viewed&&(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){s.wheeling=!1},50),n=Number(this.options.zoomRatio)||.1,t=1,e.deltaY?t=0<e.deltaY?1:-1:e.wheelDelta?t=-e.wheelDelta/120:e.detail&&(t=0<e.detail?1:-1),this.zoom(-t*n,!0,null,e)))}},Ae={show:function(){var n,r,d=0<arguments.length&&void 0!==arguments[0]&&arguments[0],u=this.element,a=this.options;return a.inline||this.showing||this.isShown||this.showing||(this.ready?(i(a.show)&&t(u,"show",a.show,{once:!0}),!1!==l(u,"show")&&this.ready&&(this.hiding&&this.transitioning.abort(),this.showing=!0,this.open(),s(n=this.viewer,j),n.setAttribute("role","dialog"),n.setAttribute("aria-labelledby",this.title.id),n.setAttribute("aria-modal",!0),n.removeAttribute("aria-hidden"),a.transition&&!d?(r=this.shown.bind(this),this.transitioning={abort:function(){o(n,p,r),s(n,m)}},e(n,c),n.initialOffsetWidth=n.offsetWidth,t(n,p,r,{once:!0}),e(n,m)):(e(n,m),this.shown()))):(this.build(),this.ready&&this.show(d))),this},hide:function(){var e,n,a,d,u,h=this,g=0<arguments.length&&void 0!==arguments[0]&&arguments[0],f=this.element,r=this.options;return r.inline||this.hiding||!this.isShown&&!this.showing||(i(r.hide)&&t(f,"hide",r.hide,{once:!0}),!1!==l(f,"hide")&&(this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort(),e=this.viewer,n=this.image,d=function(){s(e,m),h.hidden()},r.transition&&!g?(u=function t(n){n&&n.target===e&&(o(e,p,t),h.hidden())},a=function(){O(e,c)?(t(e,p,u),s(e,m)):d()},this.transitioning={abort:function(){h.viewed&&O(n,c)?o(n,p,a):O(e,c)&&o(e,p,u)}},this.viewed&&O(n,c)?(t(n,p,a,{once:!0}),this.zoomTo(0,!1,null,null,!0)):a()):d())),this},view:function(){var r=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex,c=Number(c)||0;if(!(this.hiding||this.played||c<0||c>=this.length||this.viewed&&c===this.index)){if(!this.isShown)return this.index=c,this.show();this.viewing&&this.viewing.abort();var g,j,O,m=this.element,d=this.options,_=this.title,p=this.canvas,u=this.items[c],v=u.querySelector("img"),f=y(v,"originalUrl"),w=v.getAttribute("alt"),n=document.createElement("img");a(d.inheritedAttributes,function(e){var t=v.getAttribute(e);null!==t&&n.setAttribute(e,t)}),n.src=f,n.alt=w,i(d.view)&&t(m,"view",d.view,{once:!0}),!1===l(m,"view",{originalImage:this.images[c],index:c,image:n})||!this.isShown||this.hiding||this.played||((f=this.items[this.index])&&(s(f,H),f.removeAttribute("aria-selected")),e(u,H),u.setAttribute("aria-selected",!0),d.focus&&u.focus(),this.image=n,this.viewed=!1,this.index=c,this.imageData={},e(n,F),d.loading&&e(p,E),p.innerHTML="",p.appendChild(n),this.renderList(),_.innerHTML="",t(m,S,O=function(){var t=r.imageData,e=Array.isArray(d.title)?d.title[1]:d.title;_.innerHTML=T(e=i(e)?e.call(r,n,t):"".concat(w," (").concat(t.naturalWidth," × ").concat(t.naturalHeight,")"))?e.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},{once:!0}),this.viewing={abort:function(){o(m,S,O),n.complete?r.imageRendering?r.imageRendering.abort():r.imageInitializing&&r.imageInitializing.abort():(n.src="",o(n,h,g),r.timeout&&clearTimeout(r.timeout))}},n.complete?this.load():(t(n,h,g=function(){o(n,b,j),r.load()},{once:!0}),t(n,b,j=function(){o(n,h,g),r.timeout&&(clearTimeout(r.timeout),r.timeout=!1),s(n,F),d.loading&&s(r.canvas,E)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){s(n,F),r.timeout=!1},1e3)))}return this},prev:function(){var e=this.index-1;return e<0&&(e=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.length-1:0),this.view(e),this},next:function(){var t=this.length-1,e=this.index+1;return this.view(e=t<e?0<arguments.length&&void 0!==arguments[0]&&arguments[0]?0:t:e),this},move:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData;return this.moveTo(_(e)?e:n.x+Number(e),_(t)?t:n.y+Number(t)),this},moveTo:function(e){var m=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this.element,o=this.options,s=this.imageData;if(e=Number(e),n=Number(n),this.viewed&&!this.played&&o.movable){var c=s.x,d=s.y,u=!1;if(r(e)?u=!0:e=c,r(n)?u=!0:n=d,u){if(i(o.move)&&t(a,"move",o.move,{once:!0}),!1===l(a,"move",{x:e,y:n,oldX:c,oldY:d,originalEvent:h}))return this;s.x=e,s.y=n,s.left=e,s.top=n,this.moving=!0,this.renderImage(function(){m.moving=!1,i(o.moved)&&t(a,"moved",o.moved,{once:!0}),l(a,"moved",{x:e,y:n,oldX:c,oldY:d,originalEvent:h},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var o,c=this,s=this.element,n=this.options,a=this.imageData;if(r(e=Number(e))&&this.viewed&&!this.played&&n.rotatable){if(o=a.rotate,i(n.rotate)&&t(s,"rotate",n.rotate,{once:!0}),!1===l(s,"rotate",{degree:e,oldDegree:o}))return this;a.rotate=e,this.rotating=!0,this.renderImage(function(){c.rotating=!1,i(n.rotated)&&t(s,te,n.rotated,{once:!0}),l(s,te,{degree:e,oldDegree:o},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var h=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,o=this.element,s=this.options,a=this.imageData;if(e=Number(e),n=Number(n),this.viewed&&!this.played&&s.scalable){var c=a.scaleX,d=a.scaleY,u=!1;if(r(e)?u=!0:e=c,r(n)?u=!0:n=d,u){if(i(s.scale)&&t(o,"scale",s.scale,{once:!0}),!1===l(o,"scale",{scaleX:e,scaleY:n,oldScaleX:c,oldScaleY:d}))return this;a.scaleX=e,a.scaleY=n,this.scaling=!0,this.renderImage(function(){h.scaling=!1,i(s.scaled)&&t(o,"scaled",s.scaled,{once:!0}),l(o,"scaled",{scaleX:e,scaleY:n,oldScaleX:c,oldScaleY:d},{cancelable:!1})})}}return this},zoom:function(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,t=this.imageData;return e=Number(e),this.zoomTo(t.width*(e=e<0?1/(1-e):1+e)/t.naturalWidth,n,s,o),this},zoomTo:function(e){var v,j,y,E=this,k=1<arguments.length&&void 0!==arguments[1]&&arguments[1],h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,c=4<arguments.length&&void 0!==arguments[4]&&arguments[4],p=this.element,s=this.options,u=this.pointers,n=this.imageData,C=n.x,O=n.y,_=n.width,w=n.height,f=n.naturalWidth,m=n.naturalHeight;if(r(e=Math.max(0,e))&&this.viewed&&!this.played&&(c||s.zoomable)){if(c||(c=Math.max(.01,s.minZoomRatio),g=Math.min(100,s.maxZoomRatio),e=Math.min(Math.max(e,c),g)),o)switch(o.type){case"wheel":.055<=s.zoomRatio&&.95<e&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":.99<e&&e<1.01&&(e=1)}var d,c=f*e,g=m*e,f=c-_,m=g-w,b=n.ratio;if(i(s.zoom)&&t(p,"zoom",s.zoom,{once:!0}),!1===l(p,"zoom",{ratio:e,oldRatio:b,originalEvent:o}))return this;this.zooming=!0,o?(d={left:(d=(d=this.viewer).getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:d.top+(window.pageYOffset-document.documentElement.clientTop)},u=u&&0<Object.keys(u).length?(v=j=y=0,a(u,function(e){var t=e.startX,e=e.startY;y+=t,j+=e,v+=1}),{pageX:y/=v,pageY:j/=v}):{pageX:o.pageX,pageY:o.pageY},n.x-=(u.pageX-d.left-C)/_*f,n.y-=(u.pageY-d.top-O)/w*m):x(h)&&r(h.x)&&r(h.y)?(n.x-=f*((h.x-C)/_),n.y-=m*((h.y-O)/w)):(n.x-=f/2,n.y-=m/2),n.left=n.x,n.top=n.y,n.width=c,n.height=g,n.oldRatio=b,n.ratio=e,this.renderImage(function(){E.zooming=!1,i(s.zoomed)&&t(p,"zoomed",s.zoomed,{once:!0}),l(p,"zoomed",{ratio:e,oldRatio:b,originalEvent:o},{cancelable:!1})}),k&&this.tooltip()}return this},play:function(){var n,o,d,u,p,g,v,b,f=this,j=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.isShown&&!this.played&&(p=this.element,i((o=this.options).play)&&t(p,"play",o.play,{once:!0}),!1!==l(p,"play")&&(g=this.player,v=this.loadImage.bind(this),d=[],n=u=0,this.played=!0,this.onLoadWhenPlay=v,j&&this.requestFullscreen(j),e(g,A),a(this.items,function(s,i){var r=s.querySelector("img"),a=document.createElement("img");a.src=y(r,"originalUrl"),a.alt=r.getAttribute("alt"),a.referrerPolicy=r.referrerPolicy,u+=1,e(a,L),z(a,c,o.transition),O(s,H)&&(e(a,m),n=i),d.push(a),t(a,h,v,{once:!0}),g.appendChild(a)}),r(o.interval))&&0<o.interval&&(b=function t(){clearTimeout(f.playing.timeout),s(d[n],m),e(d[n=(n+=1)<u?n:0],m),f.playing.timeout=setTimeout(t,o.interval)},1<u))&&(this.playing={prev:function t(){clearTimeout(f.playing.timeout),s(d[n],m),e(d[n=0<=--n?n:u-1],m),f.playing.timeout=setTimeout(t,o.interval)},next:b,timeout:setTimeout(b,o.interval)}),this},stop:function(){var e,n,r=this;return this.played&&(n=this.element,i((e=this.options).stop)&&t(n,"stop",e.stop,{once:!0}),!1!==l(n,"stop"))&&(e=this.player,clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,a(e.getElementsByTagName("img"),function(e){o(e,h,r.onLoadWhenPlay)}),s(e,A),e.innerHTML="",this.exitFullscreen()),this},full:function(){var a=this,n=this.options,t=this.viewer,o=this.image,i=this.list;return this.isShown&&!this.played&&!this.fulled&&n.inline&&(this.fulled=!0,this.open(),e(this.button,ve),n.transition&&(s(i,c),this.viewed)&&s(o,c),e(t,$),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby",this.title.id),t.setAttribute("aria-modal",!0),t.removeAttribute("style"),f(t,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=d({},this.containerData),this.renderList(),this.viewed)&&this.initImage(function(){a.renderImage(function(){n.transition&&setTimeout(function(){e(o,c),e(i,c)},0)})}),this},exit:function(){var a=this,t=this.options,n=this.viewer,o=this.image,i=this.list;return this.isShown&&!this.played&&this.fulled&&t.inline&&(this.fulled=!1,this.close(),s(this.button,ve),t.transition&&(s(i,c),this.viewed)&&s(o,c),t.focus&&this.clearEnforceFocus(),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),s(n,$),f(n,{zIndex:t.zIndexInline}),this.viewerData=d({},this.parentData),this.renderViewer(),this.renderList(),this.viewed)&&this.initImage(function(){a.renderImage(function(){t.transition&&setTimeout(function(){e(o,c),e(i,c)},0)})}),this},tooltip:function(){var o=this,i=this.options,n=this.tooltipBox,a=this.imageData;return this.viewed&&!this.played&&i.tooltip&&(n.textContent="".concat(Math.round(100*a.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):i.transition?(this.fading&&l(n,p),e(n,A),e(n,L),e(n,c),n.removeAttribute("aria-hidden"),n.initialOffsetWidth=n.offsetWidth,e(n,m)):(e(n,A),n.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){i.transition?(t(n,p,function(){s(n,A),s(n,L),s(n,c),n.setAttribute("aria-hidden",!0),o.fading=!1},{once:!0}),s(n,m),o.fading=!0):(s(n,A),n.setAttribute("aria-hidden",!0)),o.tooltipping=!1},1e3)),this},toggle:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return 1===this.imageData.ratio?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=d({},this.initialImageData),this.renderImage()),this},update:function(){var t,o,r=this,n=this.element,c=this.options,s=this.isImg;return s&&!n.parentNode?this.destroy():(t=[],a(s?[n]:n.querySelectorAll("img"),function(e){i(c.filter)?c.filter.call(r,e)&&t.push(e):r.getImageURL(e)&&t.push(e)}),t.length&&(this.images=t,this.length=t.length,this.ready?(o=[],a(this.items,function(e,n){var e=e.querySelector("img"),s=t[n];s&&e&&s.src===e.src&&s.alt===e.alt||o.push(n)}),f(this.list,{width:"auto"}),this.initList(),this.isShown&&(this.length?this.viewed&&(0<=(s=o.indexOf(this.index))?(this.viewed=!1,this.view(Math.max(Math.min(this.index-s,this.length-1),0))):(e(n=this.items[this.index],H),n.setAttribute("aria-selected",!0))):(this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""))):this.build()),this)},destroy:function(){var e=this.element,t=this.options;return e[n]&&(this.destroyed=!0,this.ready?(this.played&&this.stop(),t.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):t.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),t.inline||o(e,C,this.onStart),e[n]=void 0),this}},Se={getImageURL:function(e){var t=this.options.url;return t=T(t)?e.getAttribute(t):i(t)?t.call(this,e):""},enforceFocus:function(){var e=this;this.clearEnforceFocus(),t(document,le,this.onFocusin=function(t){var s=e.viewer,n=t.target;if(n!==document&&n!==s&&!s.contains(n)){for(;n;){if(null!==n.getAttribute("tabindex")||"true"===n.getAttribute("aria-modal"))return;n=n.parentElement}s.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(o(document,le,this.onFocusin),this.onFocusin=null)},open:function(){var t=this.body;e(t,he),0<this.scrollbarWidth&&(t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;s(e,he),0<this.scrollbarWidth&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var n=this.element,e=this.options,s=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,e.focus&&(s.focus(),this.enforceFocus()),i(e.shown)&&t(n,"shown",e.shown,{once:!0}),!1!==l(n,"shown")&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var o=this.element,s=this.options,n=this.viewer;s.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),e(n,j),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),n.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(i(s.hidden)&&t(o,"hidden",s.hidden,{once:!0}),l(o,"hidden",null,{cancelable:!1}))},requestFullscreen:function(e){var t=this.element.ownerDocument;this.fulled&&!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&((t=t.documentElement).requestFullscreen?x(e)?t.requestFullscreen(e):t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen())},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var t,s,i,r,c,l=this.options,o=this.pointers,n=o[Object.keys(o)[0]];if(n){switch(t=n.endX-n.startX,r=n.endY-n.startY,this.action){case R:0==t&&0==r||(this.pointerMoved=!0,this.move(t,r,e));break;case M:this.zoom((c=Q({},s=o),i=[],a(s,function(e,t){delete c[t],a(c,function(t){var n=Math.abs(e.startX-t.startX),s=Math.abs(e.startY-t.startY),o=Math.abs(e.endX-t.endX),t=Math.abs(e.endY-t.endY),n=Math.sqrt(n*n+s*s),s=Math.sqrt(o*o+t*t);i.push((s-n)/n)})}),i.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),i[0]),!1,null,e);break;case ye:this.action="switched",s=Math.abs(t),1<s&&s>Math.abs(r)&&(this.pointers={},1<t?this.prev(l.loop):t<-1&&this.next(l.loop))}a(o,function(e){e.startX=e.endX,e.startY=e.endY})}},isSwitchable:function(){var e=this.imageData,t=this.viewerData;return 1<this.length&&0<=e.x&&0<=e.y&&e.width<=t.width&&e.height<=t.height}},Me=u.Viewer,Fe=(me=-1,function(){return me+=1}),u=function(){function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,o=s;if(!(n instanceof o))throw new TypeError("Cannot call a class as a function");if(!e||1!==e.nodeType)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=d({},je,x(t)&&t),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=Fe(),this.init()}var c,u,m;return c=s,u=[{key:"noConflict",value:function(){return window.Viewer=Me,s}},{key:"setDefaults",value:function(e){d(je,x(e)&&e)}}],(m=[{key:"init",value:function(){var r,c,d,u,e=this,l=this.element,s=this.options;l[n]||(l[n]=this,s.focus&&!s.keyboard&&(s.focus=!1),d="img"===l.localName,r=[],a(d?[l]:l.querySelectorAll("img"),function(t){i(s.filter)?s.filter.call(e,t)&&r.push(t):e.getImageURL(t)&&r.push(t)}),this.isImg=d,this.length=r.length,this.images=r,this.initBody(),_(document.createElement(n).style.transition)&&(s.transition=!1),s.inline?(u=0,c=function(){var t;(u+=1)===e.length&&(e.initializing=!1,e.delaying={abort:function(){clearTimeout(t)}},t=setTimeout(function(){e.delaying=!1,e.build()},0))},this.initializing={abort:function(){a(r,function(e){e.complete||(o(e,h,c),o(e,b,c))})}},a(r,function(e){var n,s;e.complete?c():(t(e,h,n=function(){o(e,b,s),c()},{once:!0}),t(e,b,s=function(){o(e,h,n),c()},{once:!0}))})):t(l,C,this.onStart=function(t){t=t.target,"img"!==t.localName||i(s.filter)&&!s.filter.call(e,t)||e.view(e.images.indexOf(t))}))}},{key:"build",value:function(){var s,o,c,d,u,h,m,p,g,v,b,y,w,O;this.ready||(m=this.element,s=this.options,p=m.parentNode,(c=document.createElement("div")).innerHTML='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',c=(o=c.querySelector(".".concat(n,"-container"))).querySelector(".".concat(n,"-title")),u=o.querySelector(".".concat(n,"-toolbar")),d=o.querySelector(".".concat(n,"-navbar")),h=o.querySelector(".".concat(n,"-button")),v=o.querySelector(".".concat(n,"-canvas")),this.parent=p,this.viewer=o,this.title=c,this.toolbar=u,this.navbar=d,this.button=h,this.canvas=v,this.footer=o.querySelector(".".concat(n,"-footer")),this.tooltipBox=o.querySelector(".".concat(n,"-tooltip")),this.player=o.querySelector(".".concat(n,"-player")),this.list=o.querySelector(".".concat(n,"-list")),o.id="".concat(n).concat(this.id),c.id="".concat(n,"Title").concat(this.id),e(c,s.title?D(Array.isArray(s.title)?s.title[0]:s.title):j),e(d,s.navbar?D(s.navbar):j),z(h,j,!s.button),s.keyboard&&h.setAttribute("tabindex",0),s.backdrop&&(e(o,"".concat(n,"-backdrop")),s.inline||"static"===s.backdrop||G(v,V,"hide")),T(s.className)&&s.className&&s.className.split(q).forEach(function(t){e(o,t)}),s.toolbar?(b=document.createElement("ul"),g=x(s.toolbar),O=P.slice(0,3),y=P.slice(7,9),w=P.slice(9),g||e(u,D(s.toolbar)),a(g?s.toolbar:P,function(o,a){var l,c=g&&x(o),a=g?W(a):o,d=c&&!_(o.show)?o.show:o;!d||!s.zoomable&&-1!==O.indexOf(a)||!s.rotatable&&-1!==y.indexOf(a)||!s.scalable&&-1!==w.indexOf(a)||(l=c&&!_(o.size)?o.size:o,c=c&&!_(o.click)?o.click:o,o=document.createElement("li"),s.keyboard&&o.setAttribute("tabindex",0),o.setAttribute("role","button"),e(o,"".concat(n,"-").concat(a)),i(c)||G(o,V,a),r(d)&&e(o,D(d)),-1!==["small","large"].indexOf(l)?e(o,"".concat(n,"-").concat(l)):"play"===a&&e(o,"".concat(n,"-large")),i(c)&&t(o,C,c),b.appendChild(o))}),u.appendChild(b)):e(u,j),s.rotatable||(e(c=u.querySelectorAll('li[class*="rotate"]'),F),a(c,function(e){u.appendChild(e)})),s.inline?(e(h,we),f(o,{zIndex:s.zIndexInline}),"static"===window.getComputedStyle(p).position&&f(p,{position:"relative"}),p.insertBefore(o,m.nextSibling)):(e(h,_e),e(o,$),e(o,L),e(o,j),f(o,{zIndex:s.zIndex}),(d=(d=T(d=s.container)?m.ownerDocument.querySelector(d):d)||this.body).appendChild(o)),s.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,i(s.ready)&&t(m,"ready",s.ready,{once:!0}),!1===l(m,"ready")?this.ready=!1:this.ready&&s.inline&&this.view(this.index))}}])&&pe(c.prototype,m),u&&pe(c,u),Object.defineProperty(c,"prototype",{writable:!1}),s}();return d(u.prototype,v,g,ke,Ae,Se),u})