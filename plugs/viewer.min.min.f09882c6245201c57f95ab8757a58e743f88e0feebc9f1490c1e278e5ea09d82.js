/*!
 * Viewer.js v1.11.6
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:16:38.052Z
 */!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Viewer=e()}(this,function(){"use strict";function e3(t,s){var e,n=Object.keys(t);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(t),s&&(e=e.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,e)),n}function Y(n){for(var e,t=1;t<arguments.length;t++)e=null!=arguments[t]?arguments[t]:{},t%2?e3(Object(e),!0).forEach(function(t){var s=n,o=e[t=t];(t=ea(t))in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):e3(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))});return n}function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(s,n){for(var e,t=0;t<n.length;t++)e=n[t],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,ea(e.key),e)}function ea(e){return e=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===n?String:Number)(e);if("object"!=typeof(t=t.call(e,n||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"==typeof e?e:String(e)}var d,D,$,W,K,eo={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},g="undefined"!=typeof window&&void 0!==window.document,h=g?window:{},_=!!g&&!!h.document.documentElement&&"ontouchstart"in h.document.documentElement,v=g&&"PointerEvent"in h,n="viewer",B="move",Z="switch",z="zoom",V="".concat(n,"-active"),ev="".concat(n,"-close"),P="".concat(n,"-fade"),U="".concat(n,"-fixed"),e7="".concat(n,"-fullscreen"),eh="".concat(n,"-fullscreen-exit"),b="".concat(n,"-hide"),e5="".concat(n,"-hide-md-down"),eg="".concat(n,"-hide-sm-down"),ep="".concat(n,"-hide-xs-down"),u="".concat(n,"-in"),F="".concat(n,"-invisible"),E="".concat(n,"-loading"),e6="".concat(n,"-move"),e0="".concat(n,"-open"),y="".concat(n,"-show"),c="".concat(n,"-transition"),C="click",G="dblclick",e8="dragstart",e1="focusin",eu="keydown",m="load",j="error",ed=v?"pointerdown":_?"touchstart":"mousedown",er=v?"pointermove":_?"touchmove":"mousemove",es=v?"pointerup pointercancel":_?"touchend touchcancel":"mouseup",en="resize",f="transitionend",J="wheel",S="viewed",em="rotated",R="".concat(n,"Action"),q=/\s\s*/,N=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"],et,ee,ei,ef;function T(e){return"string"==typeof e}et=Number.isNaN||h.isNaN;function r(e){return"number"==typeof e&&!et(e)}function O(e){return void 0===e}function x(e){return"object"===el(e)&&null!==e}ee=Object.prototype.hasOwnProperty;function A(e){if(!x(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&ee.call(n,"isPrototypeOf")}catch(e){return!1}}function o(e){return"function"==typeof e}function a(e,n){if(e&&o(n))if(Array.isArray(e)||r(e.length))for(var s=e.length,t=0;t<s&&!1!==n.call(e,e[t],t,e);t+=1);else x(e)&&Object.keys(e).forEach(function(t){n.call(e,e[t],t,e)})}d=Object.assign||function(t){for(var n=arguments.length,s=new Array(1<n?n-1:0),e=1;e<n;e++)s[e-1]=arguments[e];return x(t)&&0<s.length&&s.forEach(function(e){x(e)&&Object.keys(e).forEach(function(n){t[n]=e[n]})}),t},ei=/^(?:width|height|left|top|marginLeft|marginTop)$/;function p(e,t){var n=e.style;a(t,function(e,t){ei.test(t)&&r(e)&&(e+="px"),n[t]=e})}function w(e,t){return e&&t&&(e.classList?e.classList.contains(t):-1<e.className.indexOf(t))}function e(t,n){var s;t&&n&&(r(t.length)?a(t,function(t){e(t,n)}):t.classList?t.classList.add(n):(s=t.className.trim())?s.indexOf(n)<0&&(t.className="".concat(s," ").concat(n)):t.className=n)}function s(e,t){e&&t&&(r(e.length)?a(e,function(e){s(e,t)}):e.classList?e.classList.remove(t):0<=e.className.indexOf(t)&&(e.className=e.className.replace(t,"")))}function M(t,n,o){n&&(r(t.length)?a(t,function(e){M(e,n,o)}):(o?e:s)(t,n))}ef=/([a-z\d])([A-Z])/g;function Q(e){return e.replace(ef,"$1-$2").toLowerCase()}function k(e,t){return x(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Q(t)))}function X(e,n,t){x(t)?e[n]=t:e.dataset?e.dataset[n]=t:e.setAttribute("data-".concat(Q(n)),t)}$=!1,g&&(K=!1,v=function(){},g=Object.defineProperty({},"once",{get:function(){return $=!0,K},set:function(e){K=e}}),h.addEventListener("test",v,g),h.removeEventListener("test",v,g)),W=$;function i(t,o,e,n){var i=3<arguments.length&&void 0!==n?n:{},s=e;o.trim().split(q).forEach(function(o){var n;W||(n=t.listeners)&&n[o]&&n[o][e]&&(s=n[o][e],delete n[o][e],0===Object.keys(n[o]).length&&delete n[o],0===Object.keys(n).length)&&delete t.listeners,t.removeEventListener(o,s,i)})}function t(e,i,t,o){var n=3<arguments.length&&void 0!==o?o:{},s=t;i.trim().split(q).forEach(function(o){var i,a;n.once&&!W&&(a=e.listeners,s=function(){delete i[o][t],e.removeEventListener(o,s,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];t.apply(e,c)},(i=void 0===a?{}:a)[o]||(i[o]={}),i[o][t]&&e.removeEventListener(o,i[o][t],n),i[o][t]=s,e.listeners=i),e.addEventListener(o,s,n)})}function l(s,t,n,i){var e;return o(Event)&&o(CustomEvent)?e=new CustomEvent(t,Y({bubbles:!0,cancelable:!0,detail:n},i)):(e=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),s.dispatchEvent(e)}function I(e){var s=e.rotate,o=e.scaleX,i=e.scaleY,t=e.translateX,e=e.translateY,n=[],t=(r(t)&&0!==t&&n.push("translateX(".concat(t,"px)")),r(e)&&0!==e&&n.push("translateY(".concat(e,"px)")),r(s)&&0!==s&&n.push("rotate(".concat(s,"deg)")),r(o)&&1!==o&&n.push("scaleX(".concat(o,")")),r(i)&&1!==i&&n.push("scaleY(".concat(i,")")),n.length?n.join(" "):"none");return{WebkitTransform:t,msTransform:t,transform:t}}D=h.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(h.navigator.userAgent);function e2(t,o,s){var n,e=document.createElement("img");return t.naturalWidth&&!D?s(t.naturalWidth,t.naturalHeight):(n=document.body||document.documentElement,e.onload=function(){s(e.width,e.height),D||n.removeChild(e)},a(o.inheritedAttributes,function(n){var s=t.getAttribute(n);null!==s&&e.setAttribute(n,s)}),e.src=t.src,D||(e.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(e))),e}function H(e){switch(e){case 2:return ep;case 3:return eg;case 4:return e5;default:return""}}function L(e,s){var t=e.pageX,e=e.pageY,n={endX:t,endY:e};return s?n:Y({timeStamp:Date.now(),startX:t,startY:e},n)}var e4,v={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,t=e.body||e.documentElement;this.body=t,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=t.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(t).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e,t=this.options,n=this.parent;t.inline&&(e={width:Math.max(n.offsetWidth,t.minWidth),height:Math.max(n.offsetHeight,t.minHeight)},this.parentData=e),!this.fulled&&e||(e=this.containerData),this.viewerData=d({},e)},renderViewer:function(){this.options.inline&&!this.fulled&&p(this.viewer,this.viewerData)},initList:function(){var r=this,d=this.element,n=this.options,o=this.list,l=[];o.innerHTML="",a(this.images,function(s,u){var e,t,i=s.src,c=s.alt||(T(c=i)?decodeURIComponent(c.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""),d=r.getImageURL(s);(i||d)&&(e=document.createElement("li"),t=document.createElement("img"),a(n.inheritedAttributes,function(e){var n=s.getAttribute(e);null!==n&&t.setAttribute(e,n)}),n.navbar&&(t.src=i||d),t.alt=c,t.setAttribute("data-original-url",d||i),e.setAttribute("data-index",u),e.setAttribute("data-viewer-action","view"),e.setAttribute("role","button"),n.keyboard&&e.setAttribute("tabindex",0),e.appendChild(t),o.appendChild(e),l.push(e))}),a(this.items=l,function(a){var c,l,o=a.firstElementChild;X(o,"filled",!0),n.loading&&e(a,E),t(o,m,c=function(e){i(o,j,l),n.loading&&s(a,E),r.loadImage(e)},{once:!0}),t(o,j,l=function(){i(o,m,c),n.loading&&s(a,E)},{once:!0})}),n.transition&&t(d,S,function(){e(o,c)},{once:!0})},renderList:function(){var t,n,s=this.index,e=this.items[s];e&&(t=e.nextElementSibling,t=parseInt(window.getComputedStyle(t||e).marginLeft,10),e=e.offsetWidth,p(this.list,d({width:(n=e+t)*this.length-t},I({translateX:(this.viewerData.width-e)/2-n*s}))))},resetList:function(){var e=this.list;e.innerHTML="",s(e,c),p(e,I({translateX:0}))},initImage:function(i){var l,s=this,n=this.options,u=this.image,a=this.viewerData,c=this.footer.offsetHeight,e=a.width,t=Math.max(a.height-c,c),o=this.imageData||{};this.imageInitializing={abort:function(){l.onload=null}},l=e2(u,n,function(m,f){var h=m/f,a=Math.max(0,Math.min(1,n.initialCoverage)),l=e,u=t,a=(s.imageInitializing=!1,e<t*h?u=e/h:l=t*h,a=r(a)?a:.9,l=Math.min(l*a,m),u=Math.min(u*a,f),(e-l)/2),c=(t-u)/2,a={left:a,top:c,x:a,y:c,width:l,height:u,oldRatio:1,ratio:l/m,aspectRatio:h,naturalWidth:m,naturalHeight:f},c=d({},a);n.rotatable&&(a.rotate=o.rotate||0,c.rotate=0),n.scalable&&(a.scaleX=o.scaleX||1,a.scaleY=o.scaleY||1,c.scaleX=1,c.scaleY=1),s.imageData=a,s.initialImageData=c,i&&i()})},renderImage:function(s){var o,a=this,n=this.image,e=this.imageData;p(n,d({width:e.width,height:e.height,marginLeft:e.x,marginTop:e.y},I(e))),s&&((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&w(n,c)?(o=function(){a.imageRendering=!1,s()},this.imageRendering={abort:function(){i(n,f,o)}},t(n,f,o,{once:!0})):s())},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},g={bind:function(){var e=this.options,n=this.viewer,o=this.canvas,s=this.element.ownerDocument;t(n,C,this.onClick=this.click.bind(this)),t(n,e8,this.onDragStart=this.dragstart.bind(this)),t(o,ed,this.onPointerDown=this.pointerdown.bind(this)),t(s,er,this.onPointerMove=this.pointermove.bind(this)),t(s,es,this.onPointerUp=this.pointerup.bind(this)),t(s,eu,this.onKeyDown=this.keydown.bind(this)),t(window,en,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&t(n,J,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&t(o,G,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,t=this.viewer,s=this.canvas,n=this.element.ownerDocument;i(t,C,this.onClick),i(t,e8,this.onDragStart),i(s,ed,this.onPointerDown),i(n,er,this.onPointerMove),i(n,es,this.onPointerUp),i(n,eu,this.onKeyDown),i(window,en,this.onResize),e.zoomable&&e.zoomOnWheel&&i(t,J,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&i(s,G,this.onDblclick)}},e9={click:function(s){var t=this.options,o=this.imageData,e=s.target,n=k(e,R);switch(n||"img"!==e.localName||"li"!==e.parentElement.localName||(n=k(e=e.parentElement,R)),_&&s.isTrusted&&e===this.canvas&&clearTimeout(this.clickCanvasTimeout),n){case"mix":this.played?this.stop():t.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(k(e,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(t.loop);break;case"play":this.play(t.fullscreen);break;case"next":this.next(t.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-o.scaleX||-1);break;case"flip-vertical":this.scaleY(-o.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(_&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var i=this,a=(this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),this.element),e=this.options,n=this.image,r=this.index,d=this.viewerData;s(n,F),e.loading&&s(this.canvas,E),n.style.cssText="height:0;"+"margin-left:".concat(d.width/2,"px;")+"margin-top:".concat(d.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){M(n,e6,e.movable),M(n,c,e.transition),i.renderImage(function(){i.viewed=!0,i.viewing=!1,o(e.viewed)&&t(a,S,e.viewed,{once:!0}),l(a,S,{originalImage:i.images[r],index:r,image:n},{cancelable:!1})})})},loadImage:function(n){var s=n.target,n=s.parentNode,e=n.offsetWidth||30,t=n.offsetHeight||50,o=!!k(s,"filled");e2(s,this.options,function(n,i){var n=n/i,i=e,a=t;e<t*n?o?i=t*n:a=e/n:o?a=e/n:i=t*n,p(s,d({width:i,height:a},I({translateX:(e-i)/2,translateY:(t-a)/2})))})},keydown:function(e){var n,t=this.options;if(t.keyboard&&(n=e.keyCode||e.which||e.charCode,13===n&&this.viewer.contains(e.target)&&this.click(e),this.fulled))switch(n){case 27:this.played?this.stop():t.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(t.loop);break;case 38:e.preventDefault(),this.zoom(t.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(t.loop);break;case 40:e.preventDefault(),this.zoom(-t.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle())}},dragstart:function(e){"img"===e.target.localName&&e.preventDefault()},pointerdown:function(e){var n=this.options,o=this.pointers,t=e.buttons,i=e.button;this.pointerMoved=!1,!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(r(t)&&1!==t||r(i)&&0!==i||e.ctrlKey)||(e.preventDefault(),e.changedTouches?a(e.changedTouches,function(e){o[e.identifier]=L(e)}):o[e.pointerId||0]=L(e),t=!!n.movable&&B,n.zoomOnTouch&&n.zoomable&&1<Object.keys(o).length?t=z:n.slideOnTouch&&("touch"===e.pointerType||"touchstart"===e.type)&&this.isSwitchable()&&(t=Z),!n.transition||t!==B&&t!==z||s(this.image,c),this.action=t)},pointermove:function(e){var t=this.pointers,n=this.action;this.viewed&&n&&(e.preventDefault(),e.changedTouches?a(e.changedTouches,function(e){d(t[e.identifier]||{},L(e,!0))}):d(t[e.pointerId||0]||{},L(e,!0)),this.change(e))},pointerup:function(t){var n,r=this,s=this.options,o=this.action,i=this.pointers;t.changedTouches?a(t.changedTouches,function(e){n=i[e.identifier],delete i[e.identifier]}):(n=i[t.pointerId||0],delete i[t.pointerId||0]),o&&(t.preventDefault(),!s.transition||o!==B&&o!==z||e(this.image,c),this.action=!1,_)&&o!==z&&n&&Date.now()-n.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),s.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){l(r.image,G,{originalEvent:t})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){r.imageClicked=!1},500)):(this.imageClicked=!1,s.backdrop&&"static"!==s.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){l(r.canvas,C,{originalEvent:t})},50))))},resize:function(){var e=this;this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)&&(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?this.stop():a(this.player.getElementsByTagName("img"),function(n){t(n,m,e.loadImage.bind(e),{once:!0}),l(n,m)}))},wheel:function(e){var t,n,s=this;this.viewed&&(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){s.wheeling=!1},50),n=Number(this.options.zoomRatio)||.1,t=1,e.deltaY?t=0<e.deltaY?1:-1:e.wheelDelta?t=-e.wheelDelta/120:e.detail&&(t=0<e.detail?1:-1),this.zoom(-t*n,!0,null,e)))}},eb={show:function(){var n,r,d=0<arguments.length&&void 0!==arguments[0]&&arguments[0],h=this.element,a=this.options;return a.inline||this.showing||this.isShown||this.showing||(this.ready?(o(a.show)&&t(h,"show",a.show,{once:!0}),!1!==l(h,"show")&&this.ready&&(this.hiding&&this.transitioning.abort(),this.showing=!0,this.open(),s(n=this.viewer,b),n.setAttribute("role","dialog"),n.setAttribute("aria-labelledby",this.title.id),n.setAttribute("aria-modal",!0),n.removeAttribute("aria-hidden"),a.transition&&!d?(r=this.shown.bind(this),this.transitioning={abort:function(){i(n,f,r),s(n,u)}},e(n,c),n.initialOffsetWidth=n.offsetWidth,t(n,f,r,{once:!0}),e(n,u)):(e(n,u),this.shown()))):(this.build(),this.ready&&this.show(d))),this},hide:function(){var e,n,r,d,m,h=this,g=0<arguments.length&&void 0!==arguments[0]&&arguments[0],p=this.element,a=this.options;return a.inline||this.hiding||!this.isShown&&!this.showing||(o(a.hide)&&t(p,"hide",a.hide,{once:!0}),!1!==l(p,"hide")&&(this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort(),e=this.viewer,n=this.image,m=function(){s(e,u),h.hidden()},a.transition&&!g?(d=function n(t){t&&t.target===e&&(i(e,f,n),h.hidden())},r=function(){w(e,c)?(t(e,f,d),s(e,u)):m()},this.transitioning={abort:function(){h.viewed&&w(n,c)?i(n,f,r):w(e,c)&&i(e,f,d)}},this.viewed&&w(n,c)?(t(n,f,r,{once:!0}),this.zoomTo(0,!1,null,null,!0)):r()):m())),this},view:function(){var r=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex,c=Number(c)||0;if(!(this.hiding||this.played||c<0||c>=this.length||this.viewed&&c===this.index)){if(!this.isShown)return this.index=c,this.show();this.viewing&&this.viewing.abort();var v,b,y,h=this.element,d=this.options,w=this.title,p=this.canvas,u=this.items[c],g=u.querySelector("img"),f=k(g,"originalUrl"),_=g.getAttribute("alt"),n=document.createElement("img");a(d.inheritedAttributes,function(e){var t=g.getAttribute(e);null!==t&&n.setAttribute(e,t)}),n.src=f,n.alt=_,o(d.view)&&t(h,"view",d.view,{once:!0}),!1===l(h,"view",{originalImage:this.images[c],index:c,image:n})||!this.isShown||this.hiding||this.played||((f=this.items[this.index])&&(s(f,V),f.removeAttribute("aria-selected")),e(u,V),u.setAttribute("aria-selected",!0),d.focus&&u.focus(),this.image=n,this.viewed=!1,this.index=c,this.imageData={},e(n,F),d.loading&&e(p,E),p.innerHTML="",p.appendChild(n),this.renderList(),w.innerHTML="",t(h,S,b=function(){var t=r.imageData,e=Array.isArray(d.title)?d.title[1]:d.title;w.innerHTML=T(e=o(e)?e.call(r,n,t):"".concat(_," (").concat(t.naturalWidth," × ").concat(t.naturalHeight,")"))?e.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},{once:!0}),this.viewing={abort:function(){i(h,S,b),n.complete?r.imageRendering?r.imageRendering.abort():r.imageInitializing&&r.imageInitializing.abort():(n.src="",i(n,m,v),r.timeout&&clearTimeout(r.timeout))}},n.complete?this.load():(t(n,m,v=function(){i(n,j,y),r.load()},{once:!0}),t(n,j,y=function(){i(n,m,v),r.timeout&&(clearTimeout(r.timeout),r.timeout=!1),s(n,F),d.loading&&s(r.canvas,E)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){s(n,F),r.timeout=!1},1e3)))}return this},prev:function(){var e=this.index-1;return e<0&&(e=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.length-1:0),this.view(e),this},next:function(){var t=this.length-1,e=this.index+1;return this.view(e=t<e?0<arguments.length&&void 0!==arguments[0]&&arguments[0]?0:t:e),this},move:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData;return this.moveTo(O(e)?e:n.x+Number(e),O(t)?t:n.y+Number(t)),this},moveTo:function(e){var m=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this.element,i=this.options,s=this.imageData;if(e=Number(e),n=Number(n),this.viewed&&!this.played&&i.movable){var c=s.x,u=s.y,d=!1;if(r(e)?d=!0:e=c,r(n)?d=!0:n=u,d){if(o(i.move)&&t(a,"move",i.move,{once:!0}),!1===l(a,"move",{x:e,y:n,oldX:c,oldY:u,originalEvent:h}))return this;s.x=e,s.y=n,s.left=e,s.top=n,this.moving=!0,this.renderImage(function(){m.moving=!1,o(i.moved)&&t(a,"moved",i.moved,{once:!0}),l(a,"moved",{x:e,y:n,oldX:c,oldY:u,originalEvent:h},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var i,c=this,s=this.element,n=this.options,a=this.imageData;if(r(e=Number(e))&&this.viewed&&!this.played&&n.rotatable){if(i=a.rotate,o(n.rotate)&&t(s,"rotate",n.rotate,{once:!0}),!1===l(s,"rotate",{degree:e,oldDegree:i}))return this;a.rotate=e,this.rotating=!0,this.renderImage(function(){c.rotating=!1,o(n.rotated)&&t(s,em,n.rotated,{once:!0}),l(s,em,{degree:e,oldDegree:i},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var h=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,i=this.element,s=this.options,a=this.imageData;if(e=Number(e),n=Number(n),this.viewed&&!this.played&&s.scalable){var d=a.scaleX,c=a.scaleY,u=!1;if(r(e)?u=!0:e=d,r(n)?u=!0:n=c,u){if(o(s.scale)&&t(i,"scale",s.scale,{once:!0}),!1===l(i,"scale",{scaleX:e,scaleY:n,oldScaleX:d,oldScaleY:c}))return this;a.scaleX=e,a.scaleY=n,this.scaling=!0,this.renderImage(function(){h.scaling=!1,o(s.scaled)&&t(i,"scaled",s.scaled,{once:!0}),l(i,"scaled",{scaleX:e,scaleY:n,oldScaleX:d,oldScaleY:c},{cancelable:!1})})}}return this},zoom:function(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,t=this.imageData;return e=Number(e),this.zoomTo(t.width*(e=e<0?1/(1-e):1+e)/t.naturalWidth,n,s,o),this},zoomTo:function(n){var v,j,w,C=this,E=1<arguments.length&&void 0!==arguments[1]&&arguments[1],f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,c=4<arguments.length&&void 0!==arguments[4]&&arguments[4],g=this.element,s=this.options,u=this.pointers,e=this.imageData,O=e.x,x=e.y,y=e.width,_=e.height,m=e.naturalWidth,h=e.naturalHeight;if(r(n=Math.max(0,n))&&this.viewed&&!this.played&&(c||s.zoomable)){if(c||(c=Math.max(.01,s.minZoomRatio),p=Math.min(100,s.maxZoomRatio),n=Math.min(Math.max(n,c),p)),i)switch(i.type){case"wheel":.055<=s.zoomRatio&&.95<n&&n<1.05&&(n=1);break;case"pointermove":case"touchmove":case"mousemove":.99<n&&n<1.01&&(n=1)}var d,c=m*n,p=h*n,m=c-y,h=p-_,b=e.ratio;if(o(s.zoom)&&t(g,"zoom",s.zoom,{once:!0}),!1===l(g,"zoom",{ratio:n,oldRatio:b,originalEvent:i}))return this;this.zooming=!0,i?(d={left:(d=(d=this.viewer).getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:d.top+(window.pageYOffset-document.documentElement.clientTop)},u=u&&0<Object.keys(u).length?(v=j=w=0,a(u,function(e){var t=e.startX,e=e.startY;w+=t,j+=e,v+=1}),{pageX:w/=v,pageY:j/=v}):{pageX:i.pageX,pageY:i.pageY},e.x-=(u.pageX-d.left-O)/y*m,e.y-=(u.pageY-d.top-x)/_*h):A(f)&&r(f.x)&&r(f.y)?(e.x-=m*((f.x-O)/y),e.y-=h*((f.y-x)/_)):(e.x-=m/2,e.y-=h/2),e.left=e.x,e.top=e.y,e.width=c,e.height=p,e.oldRatio=b,e.ratio=n,this.renderImage(function(){C.zooming=!1,o(s.zoomed)&&t(g,"zoomed",s.zoomed,{once:!0}),l(g,"zoomed",{ratio:n,oldRatio:b,originalEvent:i},{cancelable:!1})}),E&&this.tooltip()}return this},play:function(){var n,i,d,h,p,g,v,b,f=this,j=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.isShown&&!this.played&&(g=this.element,o((i=this.options).play)&&t(g,"play",i.play,{once:!0}),!1!==l(g,"play")&&(b=this.player,p=this.loadImage.bind(this),d=[],n=h=0,this.played=!0,this.onLoadWhenPlay=p,j&&this.requestFullscreen(j),e(b,y),a(this.items,function(a,r){var o=a.querySelector("img"),s=document.createElement("img");s.src=k(o,"originalUrl"),s.alt=o.getAttribute("alt"),s.referrerPolicy=o.referrerPolicy,h+=1,e(s,P),M(s,c,i.transition),w(a,V)&&(e(s,u),n=r),d.push(s),t(s,m,p,{once:!0}),b.appendChild(s)}),r(i.interval))&&0<i.interval&&(v=function t(){clearTimeout(f.playing.timeout),s(d[n],u),e(d[n=(n+=1)<h?n:0],u),f.playing.timeout=setTimeout(t,i.interval)},1<h))&&(this.playing={prev:function t(){clearTimeout(f.playing.timeout),s(d[n],u),e(d[n=0<=--n?n:h-1],u),f.playing.timeout=setTimeout(t,i.interval)},next:v,timeout:setTimeout(v,i.interval)}),this},stop:function(){var e,n,r=this;return this.played&&(n=this.element,o((e=this.options).stop)&&t(n,"stop",e.stop,{once:!0}),!1!==l(n,"stop"))&&(e=this.player,clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,a(e.getElementsByTagName("img"),function(e){i(e,m,r.onLoadWhenPlay)}),s(e,y),e.innerHTML="",this.exitFullscreen()),this},full:function(){var a=this,n=this.options,t=this.viewer,o=this.image,i=this.list;return this.isShown&&!this.played&&!this.fulled&&n.inline&&(this.fulled=!0,this.open(),e(this.button,eh),n.transition&&(s(i,c),this.viewed)&&s(o,c),e(t,U),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby",this.title.id),t.setAttribute("aria-modal",!0),t.removeAttribute("style"),p(t,{zIndex:n.zIndex}),n.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=d({},this.containerData),this.renderList(),this.viewed)&&this.initImage(function(){a.renderImage(function(){n.transition&&setTimeout(function(){e(o,c),e(i,c)},0)})}),this},exit:function(){var a=this,t=this.options,n=this.viewer,o=this.image,i=this.list;return this.isShown&&!this.played&&this.fulled&&t.inline&&(this.fulled=!1,this.close(),s(this.button,eh),t.transition&&(s(i,c),this.viewed)&&s(o,c),t.focus&&this.clearEnforceFocus(),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),s(n,U),p(n,{zIndex:t.zIndexInline}),this.viewerData=d({},this.parentData),this.renderViewer(),this.renderList(),this.viewed)&&this.initImage(function(){a.renderImage(function(){t.transition&&setTimeout(function(){e(o,c),e(i,c)},0)})}),this},tooltip:function(){var o=this,i=this.options,n=this.tooltipBox,a=this.imageData;return this.viewed&&!this.played&&i.tooltip&&(n.textContent="".concat(Math.round(100*a.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):i.transition?(this.fading&&l(n,f),e(n,y),e(n,P),e(n,c),n.removeAttribute("aria-hidden"),n.initialOffsetWidth=n.offsetWidth,e(n,u)):(e(n,y),n.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){i.transition?(t(n,f,function(){s(n,y),s(n,P),s(n,c),n.setAttribute("aria-hidden",!0),o.fading=!1},{once:!0}),s(n,u),o.fading=!0):(s(n,y),n.setAttribute("aria-hidden",!0)),o.tooltipping=!1},1e3)),this},toggle:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return 1===this.imageData.ratio?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=d({},this.initialImageData),this.renderImage()),this},update:function(){var t,i,r=this,n=this.element,c=this.options,s=this.isImg;return s&&!n.parentNode?this.destroy():(t=[],a(s?[n]:n.querySelectorAll("img"),function(e){o(c.filter)?c.filter.call(r,e)&&t.push(e):r.getImageURL(e)&&t.push(e)}),t.length&&(this.images=t,this.length=t.length,this.ready?(i=[],a(this.items,function(e,s){var e=e.querySelector("img"),n=t[s];n&&e&&n.src===e.src&&n.alt===e.alt||i.push(s)}),p(this.list,{width:"auto"}),this.initList(),this.isShown&&(this.length?this.viewed&&(0<=(s=i.indexOf(this.index))?(this.viewed=!1,this.view(Math.max(Math.min(this.index-s,this.length-1),0))):(e(n=this.items[this.index],V),n.setAttribute("aria-selected",!0))):(this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""))):this.build()),this)},destroy:function(){var e=this.element,t=this.options;return e[n]&&(this.destroyed=!0,this.ready?(this.played&&this.stop(),t.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):t.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),t.inline||i(e,C,this.onStart),e[n]=void 0),this}},ej={getImageURL:function(t){var e=this.options.url;return e=T(e)?t.getAttribute(e):o(e)?e.call(this,t):""},enforceFocus:function(){var e=this;this.clearEnforceFocus(),t(document,e1,this.onFocusin=function(s){var n=e.viewer,t=s.target;if(t!==document&&t!==n&&!n.contains(t)){for(;t;){if(null!==t.getAttribute("tabindex")||"true"===t.getAttribute("aria-modal"))return;t=t.parentElement}n.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(i(document,e1,this.onFocusin),this.onFocusin=null)},open:function(){var t=this.body;e(t,e0),0<this.scrollbarWidth&&(t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;s(e,e0),0<this.scrollbarWidth&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var n=this.element,e=this.options,s=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,e.focus&&(s.focus(),this.enforceFocus()),o(e.shown)&&t(n,"shown",e.shown,{once:!0}),!1!==l(n,"shown")&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var i=this.element,s=this.options,n=this.viewer;s.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),e(n,b),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),n.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(o(s.hidden)&&t(i,"hidden",s.hidden,{once:!0}),l(i,"hidden",null,{cancelable:!1}))},requestFullscreen:function(t){var e=this.element.ownerDocument;this.fulled&&!(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&((e=e.documentElement).requestFullscreen?A(t)?e.requestFullscreen(t):e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(c){var e,t,s,o,r,l=this.options,i=this.pointers,n=i[Object.keys(i)[0]];if(n){switch(e=n.endX-n.startX,s=n.endY-n.startY,this.action){case B:0==e&&0==s||(this.pointerMoved=!0,this.move(e,s,c));break;case z:this.zoom((r=Y({},t=i),o=[],a(t,function(e,t){delete r[t],a(r,function(t){var n=Math.abs(e.startX-t.startX),s=Math.abs(e.startY-t.startY),i=Math.abs(e.endX-t.endX),t=Math.abs(e.endY-t.endY),n=Math.sqrt(n*n+s*s),s=Math.sqrt(i*i+t*t);o.push((s-n)/n)})}),o.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),o[0]),!1,null,c);break;case Z:this.action="switched",t=Math.abs(e),1<t&&t>Math.abs(s)&&(this.pointers={},1<e?this.prev(l.loop):e<-1&&this.next(l.loop))}a(i,function(e){e.startX=e.endX,e.startY=e.endY})}},isSwitchable:function(){var e=this.imageData,t=this.viewerData;return 1<this.length&&0<=e.x&&0<=e.y&&e.width<=t.width&&e.height<=t.height}},ey=h.Viewer,e_=(e4=-1,function(){return e4+=1}),h=function(){function s(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,o=s;if(!(n instanceof o))throw new TypeError("Cannot call a class as a function");if(!e||1!==e.nodeType)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=d({},eo,A(t)&&t),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=e_(),this.init()}var c,u,h;return c=s,u=[{key:"noConflict",value:function(){return window.Viewer=ey,s}},{key:"setDefaults",value:function(e){d(eo,A(e)&&e)}}],(h=[{key:"init",value:function(){var r,c,d,u,e=this,l=this.element,s=this.options;l[n]||(l[n]=this,s.focus&&!s.keyboard&&(s.focus=!1),d="img"===l.localName,r=[],a(d?[l]:l.querySelectorAll("img"),function(t){o(s.filter)?s.filter.call(e,t)&&r.push(t):e.getImageURL(t)&&r.push(t)}),this.isImg=d,this.length=r.length,this.images=r,this.initBody(),O(document.createElement(n).style.transition)&&(s.transition=!1),s.inline?(u=0,c=function(){var t;(u+=1)===e.length&&(e.initializing=!1,e.delaying={abort:function(){clearTimeout(t)}},t=setTimeout(function(){e.delaying=!1,e.build()},0))},this.initializing={abort:function(){a(r,function(e){e.complete||(i(e,m,c),i(e,j,c))})}},a(r,function(e){var n,s;e.complete?c():(t(e,m,n=function(){i(e,j,s),c()},{once:!0}),t(e,j,s=function(){i(e,m,n),c()},{once:!0}))})):t(l,C,this.onStart=function(t){t=t.target,"img"!==t.localName||o(s.filter)&&!s.filter.call(e,t)||e.view(e.images.indexOf(t))}))}},{key:"build",value:function(){var s,i,c,d,u,h,m,f,g,v,j,y,_,w;this.ready||(m=this.element,s=this.options,g=m.parentNode,(d=document.createElement("div")).innerHTML='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',d=(i=d.querySelector(".".concat(n,"-container"))).querySelector(".".concat(n,"-title")),u=i.querySelector(".".concat(n,"-toolbar")),c=i.querySelector(".".concat(n,"-navbar")),h=i.querySelector(".".concat(n,"-button")),v=i.querySelector(".".concat(n,"-canvas")),this.parent=g,this.viewer=i,this.title=d,this.toolbar=u,this.navbar=c,this.button=h,this.canvas=v,this.footer=i.querySelector(".".concat(n,"-footer")),this.tooltipBox=i.querySelector(".".concat(n,"-tooltip")),this.player=i.querySelector(".".concat(n,"-player")),this.list=i.querySelector(".".concat(n,"-list")),i.id="".concat(n).concat(this.id),d.id="".concat(n,"Title").concat(this.id),e(d,s.title?H(Array.isArray(s.title)?s.title[0]:s.title):b),e(c,s.navbar?H(s.navbar):b),M(h,b,!s.button),s.keyboard&&h.setAttribute("tabindex",0),s.backdrop&&(e(i,"".concat(n,"-backdrop")),s.inline||"static"===s.backdrop||X(v,R,"hide")),T(s.className)&&s.className&&s.className.split(q).forEach(function(t){e(i,t)}),s.toolbar?(j=document.createElement("ul"),f=A(s.toolbar),y=N.slice(0,3),_=N.slice(7,9),w=N.slice(9),f||e(u,H(s.toolbar)),a(f?s.toolbar:N,function(i,a){var l,c=f&&A(i),a=f?Q(a):i,d=c&&!O(i.show)?i.show:i;!d||!s.zoomable&&-1!==y.indexOf(a)||!s.rotatable&&-1!==_.indexOf(a)||!s.scalable&&-1!==w.indexOf(a)||(l=c&&!O(i.size)?i.size:i,c=c&&!O(i.click)?i.click:i,i=document.createElement("li"),s.keyboard&&i.setAttribute("tabindex",0),i.setAttribute("role","button"),e(i,"".concat(n,"-").concat(a)),o(c)||X(i,R,a),r(d)&&e(i,H(d)),-1!==["small","large"].indexOf(l)?e(i,"".concat(n,"-").concat(l)):"play"===a&&e(i,"".concat(n,"-large")),o(c)&&t(i,C,c),j.appendChild(i))}),u.appendChild(j)):e(u,b),s.rotatable||(e(d=u.querySelectorAll('li[class*="rotate"]'),F),a(d,function(e){u.appendChild(e)})),s.inline?(e(h,e7),p(i,{zIndex:s.zIndexInline}),"static"===window.getComputedStyle(g).position&&p(g,{position:"relative"}),g.insertBefore(i,m.nextSibling)):(e(h,ev),e(i,U),e(i,P),e(i,b),p(i,{zIndex:s.zIndex}),(c=(c=T(c=s.container)?m.ownerDocument.querySelector(c):c)||this.body).appendChild(i)),s.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,o(s.ready)&&t(m,"ready",s.ready,{once:!0}),!1===l(m,"ready")?this.ready=!1:this.ready&&s.inline&&this.view(this.index))}}])&&ec(c.prototype,h),u&&ec(c,u),Object.defineProperty(c,"prototype",{writable:!1}),s}();return d(h.prototype,v,g,e9,eb,ej),h})